<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Download Animation Button</title>
  <style>
    body {
      background: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      gap: 40px;
      font-family: 'Segoe UI', sans-serif;
    }

    .button-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    .button {
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 14px 28px;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      border: none;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.4s ease;
    }

    .blue {
      background: #1a73e8;
      color: white;
    }

    .dark {
      background: #0f1622;
      color: white;
    }

    .button .icon {
      width: 18px;
      height: 18px;
      display: inline-block;
    }

    .button svg {
      fill: currentColor;
      width: 100%;
      height: 100%;
    }

    .button .label {
      transition: opacity 0.3s ease;
      white-space: nowrap;
    }

    .progress-bar {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      width: 0%;
      background-color: rgba(255, 255, 255, 0.5);
      animation: fillBar 2s forwards;
    }

    @keyframes fillBar {
      from { width: 0%; }
      to { width: 100%; }
    }

    .square-btn,
    .small-box {
      width: 45px;
      height: 45px;
      background: #0f1622;
      border: none;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      font-size: 18px;
    }

    .square-btn svg,
    .small-box svg {
      fill: white;
      width: 20px;
      height: 20px;
    }

    .tick-icon {
      display: none;
      color: limegreen;
    }

    .square-btn.show-tick svg,
    .small-box.show-tick svg {
      display: none;
    }

    .square-btn.show-tick .tick-icon,
    .small-box.show-tick .tick-icon {
      display: inline;
    }

    .button.open .label,
    .button.downloading .label {
      opacity: 0;
    }

    .button.open .label-open,
    .button.downloading .label-loading {
      opacity: 1;
    }

    .label-open,
    .label-loading {
      position: absolute;
      left: 28px;
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .tick {
      color: limegreen;
      font-size: 18px;
    }

    .button.downloading .icon,
    .button.open .icon {
      display: none;
    }
  </style>
</head>
<body>

  <!-- Row 1 -->
  <div class="button-container">
    <button class="button blue" onclick="handleDownload(this)">
      <span class="label">Download</span>
      <span class="label-loading">Downloading...</span>
      <span class="label-open">Open File <span class="tick">✔</span></span>
      <span class="icon">
        <svg viewBox="0 0 24 24">
          <path d="M12 16l4-5h-3V4h-2v7H8l4 5zm-6 2v2h12v-2H6z"/>
        </svg>
      </span>
    </button>

    <button class="square-btn" onclick="triggerNearbyDownload(this)">
      <svg viewBox="0 0 24 24">
        <path d="M12 16l4-5h-3V4h-2v7H8l4 5zm-6 2v2h12v-2H6z"/>
      </svg>
      <span class="tick-icon">✔</span>
    </button>
  </div>

  <!-- Row 2 -->
  <div class="button-container">
    <div class="small-box" onclick="triggerNearbyDownload(this)">
      <svg viewBox="0 0 24 24">
        <path d="M12 16l4-5h-3V4h-2v7H8l4 5zm-6 2v2h12v-2H6z"/>
      </svg>
      <span class="tick-icon">✔</span>
    </div>

    <button class="button dark" onclick="handleDownload(this)">
      <span class="label">Download</span>
      <span class="label-loading">Downloading...</span>
      <span class="label-open">Open File <span class="tick">✔</span></span>
      <span class="icon">
        <svg viewBox="0 0 24 24">
          <path d="M12 16l4-5h-3V4h-2v7H8l4 5zm-6 2v2h12v-2H6z"/>
        </svg>
      </span>
    </button>
  </div>

  <script>
    function handleDownload(btn) {
      if (btn.classList.contains('open') || btn.classList.contains('downloading')) return;

      btn.classList.add('downloading');

      const bar = document.createElement('div');
      bar.classList.add('progress-bar');
      btn.appendChild(bar);

      // Find the nearest blackbox (previous or next sibling)
      const container = btn.parentElement;
      const blackbox = Array.from(container.children).find(el =>
        el !== btn && (el.classList.contains('square-btn') || el.classList.contains('small-box'))
      );

      setTimeout(() => {
        btn.classList.remove('downloading');
        btn.classList.add('open');
        bar.remove();

        if (blackbox) {
          blackbox.classList.add('show-tick');
        }
      }, 2000);
    }

    function triggerNearbyDownload(blackbox) {
      const container = blackbox.parentElement;
      const downloadBtn = Array.from(container.children).find(el =>
        el.classList.contains('button')
      );

      if (downloadBtn) {
        handleDownload(downloadBtn);
      }
    }
  </script>

</body>
</html>
